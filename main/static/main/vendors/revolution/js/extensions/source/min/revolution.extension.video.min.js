!function(){"use strict";function e(e){return void 0==e?-1:jQuery.isNumeric(e)?e:e.split(":").length>1?60*parseInt(e.split(":")[0],0)+parseInt(e.split(":")[1],0):e}var t=jQuery.fn.revolution,a=t.is_mobile(),i=t.is_android(),o={alias:"Video Min JS",name:"revolution.extensions.video.min.js",min_core:"5.4",version:"2.0.3"};jQuery.extend(!0,t,{preLoadAudio:function(e,a){return"stop"===t.compare_version(o).check?!1:(e.find(".tp-audiolayer").each(function(){var e=jQuery(this),i={};0===e.find("audio").length&&(i.src=void 0!=e.data("videomp4")?e.data("videomp4"):"",i.pre=e.data("videopreload")||"",void 0===e.attr("id")&&e.attr("audio-layer-"+Math.round(199999*Math.random())),i.id=e.attr("id"),i.status="prepared",i.start=jQuery.now(),i.waittime=1e3*e.data("videopreloadwait")||5e3,("auto"==i.pre||"canplaythrough"==i.pre||"canplay"==i.pre||"progress"==i.pre)&&(void 0===a.audioqueue&&(a.audioqueue=[]),a.audioqueue.push(i),t.manageVideoLayer(e,a)))}),void 0)},preLoadAudioDone:function(e,t,a){t.audioqueue&&t.audioqueue.length>0&&jQuery.each(t.audioqueue,function(t,i){e.data("videomp4")!==i.src||i.pre!==a&&"auto"!==i.pre||(i.status="loaded")})},resetVideo:function(i,o,d){var r=i.data();switch(r.videotype){case"youtube":{r.player}try{if("on"==r.forcerewind){var n=e(i.data("videostartat")),s=-1==n?!0:!1,l=1===r.bgvideo||i.find(".tp-videoposter").length>0?!0:!1;n=-1==n?0:n,void 0!=r.player&&(0!==n&&!s||l)&&(r.player.seekTo(n),r.player.pauseVideo())}}catch(u){}0==i.find(".tp-videoposter").length&&1!==r.bgvideo&&d!==!0&&punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"vimeo":var p=$f(i.find("iframe").attr("id"));try{if("on"==r.forcerewind){var n=e(r.videostartat),s=-1==n?!0:!1,l=1===r.bgvideo||i.find(".tp-videoposter").length>0?!0:!1;n=-1==n?0:n,(0!==n&&!s||l)&&(p.api("seekTo",n),p.api("pause"))}}catch(u){}0==i.find(".tp-videoposter").length&&1!==r.bgvideo&&d!==!0&&punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"html5":if(a&&1==r.disablevideoonmobile)return!1;var v="html5"==r.audio?"audio":"video",c=i.find(v),g=c[0];if(punchgs.TweenLite.to(c,.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"on"==r.forcerewind&&!i.hasClass("videoisplaying"))try{var n=e(r.videostartat);g.currentTime=-1==n?0:n}catch(u){}("mute"==r.volume||t.lastToggleState(i.videomutetoggledby)||o.globalmute===!0)&&(g.muted=!0)}},isVideoMuted:function(e){var t=!1,a=e.data();switch(a.videotype){case"youtube":try{var i=a.player;t=i.isMuted()}catch(o){}break;case"vimeo":try{{$f(e.find("iframe").attr("id"))}"mute"==a.volume&&(t=!0)}catch(o){}break;case"html5":var d="html5"==a.audio?"audio":"video",r=e.find(d),n=r[0];n.muted&&(t=!0)}return t},muteVideo:function(e){var t=e.data();switch(t.videotype){case"youtube":try{var a=t.player;a.mute()}catch(i){}break;case"vimeo":try{var o=$f(e.find("iframe").attr("id"));e.data("volume","mute"),o.api("setVolume",0)}catch(i){}break;case"html5":var d="html5"==t.audio?"audio":"video",r=e.find(d),n=r[0];n.muted=!0}},unMuteVideo:function(e,t){if(t.globalmute!==!0){var a=e.data();switch(a.videotype){case"youtube":try{var i=a.player;i.unMute()}catch(o){}break;case"vimeo":try{var d=$f(e.find("iframe").attr("id"));e.data("volume","1"),d.api("setVolume",1)}catch(o){}break;case"html5":var r="html5"==a.audio?"audio":"video",n=e.find(r),s=n[0];s.muted=!1}}},stopVideo:function(e,t){var a=e.data();switch(t.leaveViewPortBasedStop||(t.lastplayedvideos=[]),t.leaveViewPortBasedStop=!1,a.videotype){case"youtube":try{var i=a.player;if(2===i.getPlayerState()||5===i.getPlayerState())return;i.pauseVideo(),a.youtubepausecalled=!0,setTimeout(function(){a.youtubepausecalled=!1},80)}catch(o){console.log("Issue at YouTube Video Pause:"),console.log(o)}break;case"vimeo":try{var d=$f(e.find("iframe").attr("id"));d.api("pause"),a.vimeopausecalled=!0,setTimeout(function(){a.vimeopausecalled=!1},80)}catch(o){console.log("Issue at Vimeo Video Pause:"),console.log(o)}break;case"html5":var r="html5"==a.audio?"audio":"video",n=e.find(r),s=n[0];void 0!=n&&void 0!=s&&s.pause()}},playVideo:function(a,i){clearTimeout(a.data("videoplaywait"));var o=a.data();switch(o.videotype){case"youtube":if(0==a.find("iframe").length)a.append(a.data("videomarkup")),n(a,i,!0);else if(void 0!=o.player.playVideo){var r=e(a.data("videostartat")),s=o.player.getCurrentTime();1==a.data("nextslideatend-triggered")&&(s=-1,a.data("nextslideatend-triggered",0)),-1!=r&&r>s&&o.player.seekTo(r),o.youtubepausecalled!==!0&&o.player.playVideo()}else a.data("videoplaywait",setTimeout(function(){o.youtubepausecalled!==!0&&t.playVideo(a,i)},50));break;case"vimeo":if(0==a.find("iframe").length)a.append(a.data("videomarkup")),n(a,i,!0);else if(a.hasClass("rs-apiready")){var l=a.find("iframe").attr("id"),u=$f(l);void 0==u.api("play")?a.data("videoplaywait",setTimeout(function(){o.vimeopausecalled!==!0&&t.playVideo(a,i)},50)):setTimeout(function(){u.api("play");var t=e(a.data("videostartat")),i=a.data("currenttime");1==a.data("nextslideatend-triggered")&&(i=-1,a.data("nextslideatend-triggered",0)),-1!=t&&t>i&&u.api("seekTo",t)},510)}else a.data("videoplaywait",setTimeout(function(){o.vimeopausecalled!==!0&&t.playVideo(a,i)},50));break;case"html5":var p="html5"==o.audio?"audio":"video",v=a.find(p),c=v[0],g=v.parent();if(1!=g.data("metaloaded"))d(c,"loadedmetadata",function(a){t.resetVideo(a,i),c.play();var o=e(a.data("videostartat")),d=c.currentTime;1==a.data("nextslideatend-triggered")&&(d=-1,a.data("nextslideatend-triggered",0)),-1!=o&&o>d&&(c.currentTime=o)}(a));else{c.play();var r=e(a.data("videostartat")),s=c.currentTime;1==a.data("nextslideatend-triggered")&&(s=-1,a.data("nextslideatend-triggered",0)),-1!=r&&r>s&&(c.currentTime=r)}}},isVideoPlaying:function(e,t){var a=!1;return void 0!=t.playingvideos&&jQuery.each(t.playingvideos,function(t,i){e.attr("id")==i.attr("id")&&(a=!0)}),a},removeMediaFromList:function(e,t){v(e,t)},prepareCoveredVideo:function(e,a,i){var o=i.find("iframe, video"),d=e.split(":")[0],r=e.split(":")[1],n=i.closest(".tp-revslider-slidesli"),s=n.width()/n.height(),l=d/r,u=s/l*100,p=l/s*100;s>l?punchgs.TweenLite.to(o,.001,{height:u+"%",width:"100%",top:-(u-100)/2+"%",left:"0px",position:"absolute"}):punchgs.TweenLite.to(o,.001,{width:p+"%",height:"100%",left:-(p-100)/2+"%",top:"0px",position:"absolute"}),o.hasClass("resizelistener")||(o.addClass("resizelistener"),jQuery(window).resize(function(){clearTimeout(o.data("resizelistener")),o.data("resizelistener",setTimeout(function(){t.prepareCoveredVideo(e,a,i)},30))}))},checkVideoApis:function(e,t,a){"https:"===location.protocol?"https":"http";if((void 0!=e.data("ytid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&(t.youtubeapineeded=!0),(void 0!=e.data("ytid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&0==a.addedyt){t.youtubestarttime=jQuery.now(),a.addedyt=1;var i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0],d=!0;jQuery("head").find("*").each(function(){"https://www.youtube.com/iframe_api"==jQuery(this).attr("src")&&(d=!1)}),d&&o.parentNode.insertBefore(i,o)}if((void 0!=e.data("vimeoid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&(t.vimeoapineeded=!0),(void 0!=e.data("vimeoid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&0==a.addedvim){t.vimeostarttime=jQuery.now(),a.addedvim=1;var r=document.createElement("script"),o=document.getElementsByTagName("script")[0],d=!0;r.src="https://secure-a.vimeocdn.com/js/froogaloop2.min.js",jQuery("head").find("*").each(function(){"https://secure-a.vimeocdn.com/js/froogaloop2.min.js"==jQuery(this).attr("src")&&(d=!1)}),d&&o.parentNode.insertBefore(r,o)}return a},manageVideoLayer:function(r,s){if("stop"===t.compare_version(o).check)return!1;var l=r.data(),p=l.videoattributes,v=l.ytid,c=l.vimeoid,g="auto"===l.videopreload||"canplay"===l.videopreload||"canplaythrough"===l.videopreload||"progress"===l.videopreload?"auto":l.videopreload,m=l.videomp4,f=l.videowebm,y=l.videoogv,h=l.allowfullscreenvideo,b=l.videocontrols,w="http",T="loop"==l.videoloop?"loop":"loopandnoslidestop"==l.videoloop?"loop":"",k=void 0!=m||void 0!=f?"html5":void 0!=v&&String(v).length>1?"youtube":void 0!=c&&String(c).length>1?"vimeo":"none",x="html5"==l.audio?"audio":"video",L="html5"==k&&0==r.find(x).length?"html5":"youtube"==k&&0==r.find("iframe").length?"youtube":"vimeo"==k&&0==r.find("iframe").length?"vimeo":"none";switch(T=l.nextslideatend===!0?"":T,l.videotype=k,L){case"html5":"controls"!=b&&(b="");var x="video";"html5"==l.audio&&(x="audio",r.addClass("tp-audio-html5"));var V=i&&s.fallbacks.allowHTML5AutoPlayOnAndroid?"muted":"",P="<"+x+" "+V+' style="object-fit:cover;background-size:cover;visible:hidden;width:100%; height:100%" class="" '+T+' preload="'+g+'">';"auto"==g&&(s.mediapreload=!0),void 0!=f&&"firefox"==t.get_browser().toLowerCase()&&(P=P+'<source src="'+f+'" type="video/webm" />'),void 0!=m&&(P=P+'<source src="'+m+'" type="video/mp4" />'),void 0!=y&&(P=P+'<source src="'+y+'" type="video/ogg" />'),P=P+"</"+x+">";var C="";("true"===h||h===!0)&&(C='<div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-full-screen">Full-Screen</button></div>'),"controls"==b&&(P+='<div class="tp-video-controls"><div class="tp-video-button-wrap"><button type="button" class="tp-video-button tp-vid-play-pause">Play</button></div><div class="tp-video-seek-bar-wrap"><input  type="range" class="tp-seek-bar" value="0"></div><div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-mute">Mute</button></div><div class="tp-video-vol-bar-wrap"><input  type="range" class="tp-volume-bar" min="0" max="1" step="0.1" value="1"></div>'+C+"</div>"),r.data("videomarkup",P),r.append(P),(a&&1==r.data("disablevideoonmobile")||t.isIE(8))&&r.find(x).remove(),r.find(x).each(function(){var e=this,a=jQuery(this);a.parent().hasClass("html5vid")||a.wrap('<div class="html5vid" style="position:relative;top:0px;left:0px;width:100%;height:100%; overflow:hidden;"></div>');var i=a.parent();1!=i.data("metaloaded")&&d(e,"loadedmetadata",function(e){u(e,s),t.resetVideo(e,s)}(r))});break;case"youtube":w="https","none"==b&&(p=p.replace("controls=1","controls=0"),-1==p.toLowerCase().indexOf("controls")&&(p+="&controls=0")),(l.videoinline===!0||"true"===l.videoinline||1===l.videoinline)&&(p+="&playsinline=1");var I=e(r.data("videostartat")),j=e(r.data("videoendat"));-1!=I&&(p=p+"&start="+I),-1!=j&&(p=p+"&end="+j);var A=p.split("origin="+w+"://"),_="";A.length>1?(_=A[0]+"origin="+w+"://",self.location.href.match(/www/gi)&&!A[1].match(/www/gi)&&(_+="www."),_+=A[1]):_=p;var S="true"===h||h===!0?"allowfullscreen":"";r.data("videomarkup",'<iframe type="text/html" src="'+w+"://www.youtube.com/embed/"+v+"?"+_+'" '+S+' width="100%" height="100%" style="opacity:0;visibility:hidden;width:100%;height:100%"></iframe>');break;case"vimeo":w="https",r.data("videomarkup",'<iframe src="'+w+"://player.vimeo.com/video/"+c+"?autoplay=0&"+p+'" webkitallowfullscreen mozallowfullscreen allowfullscreen width="100%" height="100%" style="opacity:0;visibility:hidden;100%;height:100%"></iframe>')}var O=a&&"on"==r.data("noposteronmobile");if(void 0!=l.videoposter&&l.videoposter.length>2&&!O)0==r.find(".tp-videoposter").length&&r.append('<div class="tp-videoposter noSwipe" style="cursor:pointer; position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:3;background-image:url('+l.videoposter+'); background-size:cover;background-position:center center;"></div>'),0==r.find("iframe").length&&r.find(".tp-videoposter").click(function(){if(t.playVideo(r,s),a){if(1==r.data("disablevideoonmobile"))return!1;punchgs.TweenLite.to(r.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(r.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut})}});else{if(a&&1==r.data("disablevideoonmobile"))return!1;0!=r.find("iframe").length||"youtube"!=k&&"vimeo"!=k||(r.append(r.data("videomarkup")),n(r,s,!1))}"none"!=r.data("dottedoverlay")&&void 0!=r.data("dottedoverlay")&&1!=r.find(".tp-dottedoverlay").length&&r.append('<div class="tp-dottedoverlay '+r.data("dottedoverlay")+'"></div>'),r.addClass("HasListener"),1==r.data("bgvideo")&&punchgs.TweenLite.set(r.find("video, iframe"),{autoAlpha:0})}});var d=function(e,t,a){e.addEventListener?e.addEventListener(t,a,{capture:!1,passive:!0}):e.attachEvent(t,a,{capture:!1,passive:!0})},r=function(e,t,a){var i={};return i.video=e,i.videotype=t,i.settings=a,i},n=function(i,o,d){var n=i.data(),u=i.find("iframe"),c="iframe"+Math.round(1e5*Math.random()+1),g=n.videoloop,m="loopandnoslidestop"!=g;if(g="loop"==g||"loopandnoslidestop"==g,1==i.data("forcecover")){i.removeClass("fullscreenvideo").addClass("coverscreenvideo");var f=i.data("aspectratio");void 0!=f&&f.split(":").length>1&&t.prepareCoveredVideo(f,o,i)}if(1==i.data("bgvideo")){var f=i.data("aspectratio");void 0!=f&&f.split(":").length>1&&t.prepareCoveredVideo(f,o,i)}if(u.attr("id",c),d&&i.data("startvideonow",!0),1!==i.data("videolistenerexist"))switch(n.videotype){case"youtube":var y=new YT.Player(c,{events:{onStateChange:function(a){var d=i.closest(".tp-simpleresponsive"),u=(n.videorate,i.data("videostart"),l());if(a.data==YT.PlayerState.PLAYING)punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"mute"==i.data("volume")||t.lastToggleState(i.data("videomutetoggledby"))||o.globalmute===!0?y.mute():(y.unMute(),y.setVolume(parseInt(i.data("volume"),0)||75)),o.videoplaying=!0,p(i,o),m?o.c.trigger("stoptimer"):o.videoplaying=!1,o.c.trigger("revolution.slide.onvideoplay",r(y,"youtube",i.data())),t.toggleState(n.videotoggledby);else{if(0==a.data&&g){var c=e(i.data("videostartat"));-1!=c&&y.seekTo(c),y.playVideo(),t.toggleState(n.videotoggledby)}!u&&(0==a.data||2==a.data)&&"on"==i.data("showcoveronpause")&&i.find(".tp-videoposter").length>0&&(punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),-1!=a.data&&3!=a.data&&(o.videoplaying=!1,o.tonpause=!1,v(i,o),d.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(y,"youtube",i.data())),(void 0==o.currentLayerVideoIsPlaying||o.currentLayerVideoIsPlaying.attr("id")==i.attr("id"))&&t.unToggleState(n.videotoggledby)),0==a.data&&1==i.data("nextslideatend")?(s(),i.data("nextslideatend-triggered",1),o.c.revnext(),v(i,o)):(v(i,o),o.videoplaying=!1,d.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(y,"youtube",i.data())),(void 0==o.currentLayerVideoIsPlaying||o.currentLayerVideoIsPlaying.attr("id")==i.attr("id"))&&t.unToggleState(n.videotoggledby))}},onReady:function(t){{var o=n.videorate;i.data("videostart")}if(i.addClass("rs-apiready"),void 0!=o&&t.target.setPlaybackRate(parseFloat(o)),i.find(".tp-videoposter").unbind("click"),i.find(".tp-videoposter").click(function(){a||y.playVideo()}),i.data("startvideonow")){n.player.playVideo();var d=e(i.data("videostartat"));-1!=d&&n.player.seekTo(d)}i.data("videolistenerexist",1)}}});i.data("player",y);break;case"vimeo":for(var h,b=u.attr("src"),w={},T=b,k=/([^&=]+)=([^&]*)/g;h=k.exec(T);)w[decodeURIComponent(h[1])]=decodeURIComponent(h[2]);b=void 0!=w.player_id?b.replace(w.player_id,c):b+"&player_id="+c;try{b=b.replace("api=0","api=1")}catch(x){}b+="&api=1",u.attr("src",b);var y=i.find("iframe")[0],L=(jQuery("#"+c),$f(c));L.addEvent("ready",function(){if(i.addClass("rs-apiready"),L.addEvent("play",function(){i.data("nextslidecalled",0),punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),o.c.trigger("revolution.slide.onvideoplay",r(L,"vimeo",i.data())),o.videoplaying=!0,p(i,o),m?o.c.trigger("stoptimer"):o.videoplaying=!1,"mute"==i.data("volume")||t.lastToggleState(i.data("videomutetoggledby"))||o.globalmute===!0?L.api("setVolume","0"):L.api("setVolume",parseInt(i.data("volume"),0)/100||.75),t.toggleState(n.videotoggledby)}),L.addEvent("playProgress",function(t){var a=e(i.data("videoendat"));if(i.data("currenttime",t.seconds),0!=a&&Math.abs(a-t.seconds)<.3&&a>t.seconds&&1!=i.data("nextslidecalled"))if(g){L.api("play");var d=e(i.data("videostartat"));-1!=d&&L.api("seekTo",d)}else 1==i.data("nextslideatend")&&(i.data("nextslideatend-triggered",1),i.data("nextslidecalled",1),o.c.revnext()),L.api("pause")}),L.addEvent("finish",function(){v(i,o),o.videoplaying=!1,o.c.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(L,"vimeo",i.data())),1==i.data("nextslideatend")&&(i.data("nextslideatend-triggered",1),o.c.revnext()),(void 0==o.currentLayerVideoIsPlaying||o.currentLayerVideoIsPlaying.attr("id")==i.attr("id"))&&t.unToggleState(n.videotoggledby)}),L.addEvent("pause",function(){i.find(".tp-videoposter").length>0&&"on"==i.data("showcoveronpause")&&(punchgs.TweenLite.to(i.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(i.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),o.videoplaying=!1,o.tonpause=!1,v(i,o),o.c.trigger("starttimer"),o.c.trigger("revolution.slide.onvideostop",r(L,"vimeo",i.data())),(void 0==o.currentLayerVideoIsPlaying||o.currentLayerVideoIsPlaying.attr("id")==i.attr("id"))&&t.unToggleState(n.videotoggledby)}),i.find(".tp-videoposter").unbind("click"),i.find(".tp-videoposter").click(function(){return a?void 0:(L.api("play"),!1)}),i.data("startvideonow")){L.api("play");var d=e(i.data("videostartat"));-1!=d&&L.api("seekTo",d)}i.data("videolistenerexist",1)})}else{var V=e(i.data("videostartat"));switch(n.videotype){case"youtube":d&&(n.player.playVideo(),-1!=V&&n.player.seekTo());break;case"vimeo":if(d){var L=$f(i.find("iframe").attr("id"));L.api("play"),-1!=V&&L.api("seekTo",V)}}}},s=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},l=function(){try{if(void 0!==window.fullScreen)return window.fullScreen;var e=5;return jQuery.browser.webkit&&/Apple Computer/.test(navigator.vendor)&&(e=42),screen.width==window.innerWidth&&Math.abs(screen.height-window.innerHeight)<e}catch(t){}},u=function(o,n){if(a&&1==o.data("disablevideoonmobile"))return!1;var u=o.data(),c="html5"==u.audio?"audio":"video",g=o.find(c),m=g[0],f=g.parent(),y=u.videoloop,h="loopandnoslidestop"!=y;if(y="loop"==y||"loopandnoslidestop"==y,f.data("metaloaded",1),1!=o.data("bgvideo")||"none"!==u.videoloop&&u.videoloop!==!1||(h=!1),void 0==g.attr("control")&&(0!=o.find(".tp-video-play-button").length||a||o.append('<div class="tp-video-play-button"><i class="revicon-right-dir"></i><span class="tp-revstop">&nbsp;</span></div>'),o.find("video, .tp-poster, .tp-video-play-button").click(function(){o.hasClass("videoisplaying")?m.pause():m.play()})),1==o.data("forcecover")||o.hasClass("fullscreenvideo")||1==o.data("bgvideo"))if(1==o.data("forcecover")||1==o.data("bgvideo")){f.addClass("fullcoveredvideo");var b=o.data("aspectratio")||"4:3";t.prepareCoveredVideo(b,n,o)}else f.addClass("fullscreenvideo");var w=o.find(".tp-vid-play-pause")[0],T=o.find(".tp-vid-mute")[0],k=o.find(".tp-vid-full-screen")[0],x=o.find(".tp-seek-bar")[0],L=o.find(".tp-volume-bar")[0];void 0!=w&&d(w,"click",function(){1==m.paused?m.play():m.pause()}),void 0!=T&&d(T,"click",function(){0==m.muted?(m.muted=!0,T.innerHTML="Unmute"):(m.muted=!1,T.innerHTML="Mute")}),void 0!=k&&k&&d(k,"click",function(){m.requestFullscreen?m.requestFullscreen():m.mozRequestFullScreen?m.mozRequestFullScreen():m.webkitRequestFullscreen&&m.webkitRequestFullscreen()}),void 0!=x&&(d(x,"change",function(){var e=m.duration*(x.value/100);m.currentTime=e}),d(x,"mousedown",function(){o.addClass("seekbardragged"),m.pause()}),d(x,"mouseup",function(){o.removeClass("seekbardragged"),m.play()})),d(m,"canplaythrough",function(){t.preLoadAudioDone(o,n,"canplaythrough")}),d(m,"canplay",function(){t.preLoadAudioDone(o,n,"canplay")}),d(m,"progress",function(){t.preLoadAudioDone(o,n,"progress")}),d(m,"timeupdate",function(){var t=100/m.duration*m.currentTime,a=e(o.data("videoendat")),i=m.currentTime;if(void 0!=x&&(x.value=t),0!=a&&-1!=a&&Math.abs(a-i)<=.3&&a>i&&1!=o.data("nextslidecalled"))if(y){m.play();var d=e(o.data("videostartat"));-1!=d&&(m.currentTime=d)}else 1==o.data("nextslideatend")&&(o.data("nextslideatend-triggered",1),o.data("nextslidecalled",1),n.just_called_nextslide_at_htmltimer=!0,n.c.revnext(),setTimeout(function(){n.just_called_nextslide_at_htmltimer=!1},1e3)),m.pause()}),void 0!=L&&d(L,"change",function(){m.volume=L.value}),d(m,"play",function(){o.data("nextslidecalled",0);var e=o.data("volume");e=void 0!=e&&"mute"!=e?parseFloat(e)/100:e,i||(m.muted=n.globalmute===!0?!0:!1,e>1&&(e/=100),"mute"==e?m.muted=!0:void 0!=e&&(m.volume=e)),o.addClass("videoisplaying");var a="html5"==u.audio?"audio":"video";p(o,n),h&&"audio"!=a?(n.videoplaying=!0,n.c.trigger("stoptimer"),n.c.trigger("revolution.slide.onvideoplay",r(m,"html5",u))):(n.videoplaying=!1,"audio"!=a&&n.c.trigger("starttimer"),n.c.trigger("revolution.slide.onvideostop",r(m,"html5",u))),punchgs.TweenLite.to(o.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(o.find(a),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});var d=o.find(".tp-vid-play-pause")[0],s=o.find(".tp-vid-mute")[0];void 0!=d&&(d.innerHTML="Pause"),void 0!=s&&m.muted&&(s.innerHTML="Unmute"),t.toggleState(u.videotoggledby)}),d(m,"pause",function(){var e="html5"==u.audio?"audio":"video",a=l();!a&&o.find(".tp-videoposter").length>0&&"on"==o.data("showcoveronpause")&&!o.hasClass("seekbardragged")&&(punchgs.TweenLite.to(o.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(o.find(e),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),o.removeClass("videoisplaying"),n.videoplaying=!1,v(o,n),"audio"!=e&&n.c.trigger("starttimer"),n.c.trigger("revolution.slide.onvideostop",r(m,"html5",o.data()));var i=o.find(".tp-vid-play-pause")[0];void 0!=i&&(i.innerHTML="Play"),(void 0==n.currentLayerVideoIsPlaying||n.currentLayerVideoIsPlaying.attr("id")==o.attr("id"))&&t.unToggleState(u.videotoggledby)}),d(m,"ended",function(){s(),v(o,n),n.videoplaying=!1,v(o,n),"audio"!=c&&n.c.trigger("starttimer"),n.c.trigger("revolution.slide.onvideostop",r(m,"html5",o.data())),o.data("nextslideatend")===!0&&m.currentTime>0&&(1==!n.just_called_nextslide_at_htmltimer&&(o.data("nextslideatend-triggered",1),n.c.revnext(),n.just_called_nextslide_at_htmltimer=!0),setTimeout(function(){n.just_called_nextslide_at_htmltimer=!1},1500)),o.removeClass("videoisplaying")})},p=function(e,a){void 0==a.playingvideos&&(a.playingvideos=new Array),e.data("stopallvideos")&&void 0!=a.playingvideos&&a.playingvideos.length>0&&(a.lastplayedvideos=jQuery.extend(!0,[],a.playingvideos),jQuery.each(a.playingvideos,function(e,i){t.stopVideo(i,a)})),a.playingvideos.push(e),a.currentLayerVideoIsPlaying=e},v=function(e,t){void 0!=t.playingvideos&&jQuery.inArray(e,t.playingvideos)>=0&&t.playingvideos.splice(jQuery.inArray(e,t.playingvideos),1)}}(jQuery);